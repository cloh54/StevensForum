<main>
    <div class="modal" id="report-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Report this post</h2>
            </div>
            <div class="modal-form">
                <div class="form-container">
                    <form id="report-form" action="/reports/createReport" method="post">
                        <label for="report">Why are you reporting this post?</label>
                        <input type="text" name="report">
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="post-container">
        <div class="button-container">
            {{#if user}}
            <div class="report-button-container">
                <button class="report-button" id="report-button">Report</button>
            </div>
            {{/if}}
        </div>
        <h1>{{post.topic}}</h1>

        <p>{{post.body}}</p>
        <div class="tag-container">
            <h4>Tags</h4>
            {{#each post.tags}}
            <p class="tag">{{this}}</p>
            {{/each}}
        </div>
        <div class="like-container">
            <button id="like" class="like-button">Like</button>
            <button id="dislike" class="like-button">Dislike</button>
        </div>
    </div>
    {{#if user}}
    <div class="form-container" id="comment-form-container">
        <form id="comment-form" action="/posts/{{post._id}}/comment" method="post">
            <label for="comment">What is your answer?</label>
            <input type="text" name="comment">
            <input type="submit" value="Comment">
        </form>
    </div>
    {{/if}}
    <div class="comments-container">
        <h3>Comments</h3>
        <ul>
            {{#each commentsList}}
            <div class="comment-container">
                <p>{{body}}</p>
            </div>
            {{/each}}
            
        </ul>
    </div>
</main>

<script>
$('#like').click(function() {
$.ajax({
  url: '/posts/addLike/' + post._id,
  method: 'POST',
  success: function(data) {
    $('#like').text(data.likeCount);
  }
});
$(this).addClass('clicked').prop('disabled', true);
$('#dislike').removeClass('clicked').prop('disabled', false);
});

$('#dislike').click(function() {
$.ajax({
  url: '/posts/addDislike/' + post._id,
  method: 'POST',
  success: function(data) {
    $('#dislike').text(data.likeCount);
  }
});
$(this).addClass('clicked').prop('disabled', true);
$('#like').removeClass('clicked').prop('disabled', false);
});

</script>
